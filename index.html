<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡πÉ‡∏ô‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø - ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏¥‡∏á 7 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin=""/>
    
    <!-- Google Fonts for Thai -->
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Prompt', 'Sarabun', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f8f9fa;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* ‡πÅ‡∏ñ‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
        .tab-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
        }
        
        .tab-button {
            flex: 1;
            padding: 16px;
            background: white;
            border: none;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            font-family: 'Prompt', sans-serif;
        }
        
        .tab-button.active {
            color: #1a73e8;
            border-bottom-color: #1a73e8;
            background: #f8f9ff;
        }
        
        .tab-button:active {
            background: #e8f0fe;
        }
        
        /* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
        .content {
            margin-top: 58px;
            padding-bottom: 20px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà */
        #map {
            width: 100%;
            height: calc(100vh - 58px);
        }
        
        /* ‡∏õ‡πä‡∏≠‡∏õ‡∏≠‡∏±‡∏û‡∏Ç‡∏≠‡∏á Leaflet */
        .leaflet-popup-content-wrapper {
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        
        .leaflet-popup-content {
            margin: 12px 14px;
            font-family: 'Prompt', sans-serif;
        }
        
        .popup-content h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
            color: #1a73e8;
            border-bottom: 2px solid #eee;
            padding-bottom: 6px;
            font-weight: 600;
        }
        
        .popup-price {
            font-size: 18px;
            font-weight: bold;
            color: #d93025;
            margin: 10px 0;
        }
        
        .popup-highlight {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            padding: 8px 10px;
            border-radius: 6px;
            margin: 8px 0;
            border-left: 4px solid #ffc107;
            font-weight: 600;
            font-size: 13px;
        }
        
        .popup-detail {
            margin: 6px 0;
            font-size: 13px;
            color: #333;
            line-height: 1.5;
        }
        
        .popup-footer {
            margin-top: 10px;
            padding-top: 8px;
            border-top: 1px dashed #ccc;
            font-size: 12px;
            color: #666;
        }
        
        .popup-link {
            display: block;
            background: linear-gradient(135deg, #1a73e8, #1557b0);
            color: white !important;
            text-align: center;
            padding: 10px 12px;
            margin-top: 10px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            font-size: 13px;
            transition: all 0.3s ease;
            line-height: 1.4;
        }
        
        /* ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î */
        .property-list {
            padding: 16px;
        }
        
        .list-header {
            background: linear-gradient(135deg, #1a73e8, #1557b0);
            color: white;
            padding: 20px;
            margin-bottom: 16px;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(26, 115, 232, 0.2);
        }
        
        .list-header h2 {
            font-size: 21px;
            margin-bottom: 16px;
            text-align: center;
            font-weight: 600;
        }
        
        .legend-mobile {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .legend-item-mobile {
            display: flex;
            align-items: center;
            font-size: 13px;
            color: white;
            background: rgba(255,255,255,0.1);
            padding: 8px 12px;
            border-radius: 8px;
        }
        
        .color-indicator {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            margin-right: 8px;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            flex-shrink: 0;
        }
        
        .property-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: transform 0.2s, box-shadow 0.2s;
            border: 1px solid #e8eaed;
        }
        
        .property-card:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .property-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        
        .rank-badge {
            background: linear-gradient(135deg, #1a73e8, #1557b0);
            color: white;
            padding: 8px 14px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: bold;
            margin-right: 12px;
            flex-shrink: 0;
            box-shadow: 0 3px 8px rgba(26, 115, 232, 0.3);
            min-width: 60px;
            text-align: center;
        }
        
        .property-name {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            line-height: 1.4;
        }
        
        .property-name-th {
            font-size: 16px;
            font-weight: 500;
            color: #666;
            margin-top: 4px;
        }
        
        .property-price {
            font-size: 24px;
            font-weight: bold;
            color: #d93025;
            margin: 16px 0;
            text-align: center;
            background: #fef7f0;
            padding: 12px;
            border-radius: 12px;
            border: 2px solid #fbbc04;
        }
        
        .property-highlight {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            padding: 12px 16px;
            border-radius: 12px;
            margin: 16px 0;
            border-left: 4px solid #ffc107;
            font-weight: 600;
            font-size: 14px;
            color: #856404;
            box-shadow: 0 2px 6px rgba(255, 193, 7, 0.2);
            line-height: 1.5;
        }
        
        .property-details {
            margin: 12px 0;
        }
        
        .detail-row {
            display: flex;
            align-items: center;
            padding: 10px 0;
            font-size: 15px;
            color: #555;
            line-height: 1.5;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .detail-row:last-child {
            border-bottom: none;
        }
        
        .detail-icon {
            width: 28px;
            margin-right: 12px;
            flex-shrink: 0;
            font-size: 16px;
        }
        
        .property-footer {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 2px dashed #ddd;
            font-size: 14px;
            color: #666;
            text-align: center;
            background: #f8f9fa;
            padding: 16px;
            border-radius: 8px;
        }
        
        .view-button {
            display: block;
            width: 100%;
            padding: 16px;
            margin-top: 16px;
            background: linear-gradient(135deg, #1a73e8, #1557b0);
            color: white;
            text-align: center;
            border-radius: 12px;
            text-decoration: none;
            font-weight: bold;
            font-size: 15px;
            box-shadow: 0 4px 16px rgba(26, 115, 232, 0.3);
            transition: all 0.3s ease;
            line-height: 1.4;
        }
        
        .view-button:active {
            transform: scale(0.97);
            box-shadow: 0 2px 8px rgba(26, 115, 232, 0.3);
        }
        
        /* ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà */
        .custom-marker {
            background-color: white;
            border: 3px solid white;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            color: white;
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <!-- ‡πÅ‡∏ñ‡∏ö‡πÄ‡∏°‡∏ô‡∏π -->
    <div class="tab-container">
        <button class="tab-button active" onclick="switchTab('map')">üó∫ ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</button>
        <button class="tab-button" onclick="switchTab('list')">üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
    </div>
    
    <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ -->
    <div class="content">
        <!-- ‡πÅ‡∏ó‡πá‡∏ö‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà -->
        <div id="map-tab" class="tab-content active">
            <div id="map"></div>
        </div>
        
        <!-- ‡πÅ‡∏ó‡πá‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ -->
        <div id="list-tab" class="tab-content">
            <div class="property-list">
                <div class="list-header">
                    <h2>üèÜ ‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏¥‡∏á 7 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÅ‡∏£‡∏Å</h2>
                    <div class="legend-mobile">
                        <div class="legend-item-mobile">
                            <span class="color-indicator" style="background: #e74c3c;"></span>
                            ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 1: ‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î 68„é°
                        </div>
                        <div class="legend-item-mobile">
                            <span class="color-indicator" style="background: #e67e22;"></span>
                            ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 2-3: 60„é°+
                        </div>
                        <div class="legend-item-mobile">
                            <span class="color-indicator" style="background: #f39c12;"></span>
                            ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 4-5: ‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤
                        </div>
                        <div class="legend-item-mobile">
                            <span class="color-indicator" style="background: #27ae60;"></span>
                            ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 6-7: 60„é°
                        </div>
                    </div>
                </div>
                
                <!-- ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î -->
                <div id="property-cards"></div>
            </div>
        </div>
    </div>

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
            crossorigin=""></script>

    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î (‡∏â‡∏ö‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)
        const properties = [
            {
                rank: 1,
                name: "Belle Grand Rama 9",
                nameTh: "‡πÄ‡∏ö‡∏•‡∏•‡πå ‡πÅ‡∏Å‡∏£‡∏ô‡∏î‡πå ‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏° 9",
                lat: 13.760237221313165,
                lng: 100.56921625457834,
                size: 68,
                bedrooms: 2,
                bathrooms: 1,
                price: 35000,
                station: "MRT ‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏° 9 (‡πÄ‡∏î‡∏¥‡∏ô 5-8 ‡∏ô‡∏≤‡∏ó‡∏µ)",
                age: "‡∏≠‡∏≤‡∏¢‡∏∏‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 12 ‡∏õ‡∏µ",
                features: "‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥, ‡∏ü‡∏¥‡∏ï‡πÄ‡∏ô‡∏™, ‡∏´‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£",
                color: "#e74c3c",
                highlight: "‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î 68 ‡∏ï‡∏£.‡∏°.!",
                propertyUrl: "https://www.facebook.com/groups/6521519787867197/posts/25934857656106787/"
            },
            {
                rank: 2,
                name: "Ideo Q Phayathai",
                nameTh: "‡πÑ‡∏≠‡∏î‡∏µ‡πÇ‡∏≠ ‡∏Ñ‡∏¥‡∏ß ‡∏û‡∏ç‡∏≤‡πÑ‡∏ó",
                lat: 13.755906097726632,
                lng: 100.53277004848589,
                size: 65,
                bedrooms: 2,
                bathrooms: 2,
                price: 35000,
                station: "BTS ‡∏û‡∏ç‡∏≤‡πÑ‡∏ó (‡πÄ‡∏î‡∏¥‡∏ô 2-3 ‡∏ô‡∏≤‡∏ó‡∏µ)",
                age: "‡∏≠‡∏≤‡∏¢‡∏∏‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 15 ‡∏õ‡∏µ",
                features: "‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥, ‡∏ï‡πà‡∏≠ Airport Link ‡πÑ‡∏î‡πâ",
                color: "#e67e22",
                highlight: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏°‡∏≤‡∏Å",
                propertyUrl: "https://propertyscout.co.th/en/2-br-condo-ideo-q-phayathai-near-bts-phaya-thai-1852140/"
            },
            {
                rank: 3,
                name: "The Address Phayathai",
                nameTh: "‡∏î‡∏¥ ‡πÅ‡∏≠‡∏î‡πÄ‡∏î‡∏£‡∏™ ‡∏û‡∏ç‡∏≤‡πÑ‡∏ó",
                lat: 13.759685947389874,
                lng: 100.5317286545783,
                size: 63,
                bedrooms: 2,
                bathrooms: 1,
                price: 25000,
                station: "BTS ‡∏û‡∏ç‡∏≤‡πÑ‡∏ó (‡πÄ‡∏î‡∏¥‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ)",
                age: "‡∏≠‡∏≤‡∏¢‡∏∏‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 14 ‡∏õ‡∏µ",
                features: "‡∏ã‡∏≤‡∏ß‡∏ô‡πà‡∏≤, ‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥",
                color: "#e67e22",
                highlight: "‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î! 2.52 ‡∏ï‡∏£.‡∏°./1,000‡∏ø",
                propertyUrl: "https://propertyscout.co.th/en/2-br-condo-the-address-phayathai-near-bts-phaya-thai-2351890/"
            },
            {
                rank: 4,
                name: "Thru Thonglor",
                nameTh: "‡∏ó‡∏£‡∏π ‡∏ó‡∏≠‡∏á‡∏´‡∏•‡πà‡∏≠",
                lat: 13.744439248847318,
                lng: 100.58543526807097,
                size: 62.4,
                bedrooms: 2,
                bathrooms: 2,
                price: 25000,
                station: "BTS ‡∏ó‡∏≠‡∏á‡∏´‡∏•‡πà‡∏≠ (‡∏°‡∏µ‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á)",
                age: "‡∏≠‡∏≤‡∏¢‡∏∏‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 12 ‡∏õ‡∏µ",
                features: "‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥, ‡∏¢‡πà‡∏≤‡∏ô‡∏ó‡∏≠‡∏á‡∏´‡∏•‡πà‡∏≠",
                color: "#f39c12",
                highlight: "‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡∏µ‡πÉ‡∏ô‡∏¢‡πà‡∏≤‡∏ô‡∏ó‡∏≠‡∏á‡∏´‡∏•‡πà‡∏≠",
                propertyUrl: "https://www.facebook.com/groups/1046291836187649/posts/2191321105018044/"
            },
            {
                rank: 5,
                name: "The Line Vibe",
                nameTh: "‡πÄ‡∏î‡∏≠‡∏∞ ‡πÑ‡∏•‡∏ô‡πå ‡πÑ‡∏ß‡∏ö‡πå",
                lat: 13.817796190281511,
                lng: 100.56709881040038,
                size: 60,
                bedrooms: 2,
                bathrooms: 2,
                price: 25000,
                station: "BTS ‡∏´‡πâ‡∏≤‡πÅ‡∏¢‡∏Å‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß (‡πÄ‡∏î‡∏¥‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ)",
                age: "‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà",
                features: "‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥, ‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡πÑ‡∏•‡∏ô‡πå",
                color: "#f39c12",
                highlight: "60 ‡∏ï‡∏£.‡∏°. ‡∏°‡∏µ 2 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥",
                propertyUrl: "https://www.facebook.com/groups/661207761960248/posts/1383242806423403/"
            },
            {
                rank: 6,
                name: "Ideo O2",
                nameTh: "‡πÑ‡∏≠‡∏î‡∏µ‡πÇ‡∏≠ ‡πÇ‡∏≠‡∏ó‡∏π",
                lat: 13.67342536698527,
                lng: 100.60445935773538,
                size: 60,
                bedrooms: 2,
                bathrooms: 2,
                price: 28000,
                station: "BTS ‡∏ö‡∏≤‡∏á‡∏ô‡∏≤ (‡πÄ‡∏î‡∏¥‡∏ô 5-10 ‡∏ô‡∏≤‡∏ó‡∏µ)",
                age: "‡∏≠‡∏≤‡∏¢‡∏∏‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 7 ‡∏õ‡∏µ",
                features: "‡∏™‡∏£‡∏∞ 3 ‡∏™‡∏£‡∏∞, ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏£‡∏µ‡∏™‡∏≠‡∏£‡πå‡∏ó",
                color: "#27ae60",
                highlight: "‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏£‡∏µ‡∏™‡∏≠‡∏£‡πå‡∏ó",
                propertyUrl: "https://www.facebook.com/groups/1046291836187649/posts/2192147568268731/"
            },
            {
                rank: 7,
                name: "M Jatujak",
                nameTh: "‡πÄ‡∏≠‡πá‡∏° ‡∏à‡∏ï‡∏∏‡∏à‡∏±‡∏Å‡∏£",
                lat: 13.797914490603361,
                lng: 100.55174575457877,
                size: 60,
                bedrooms: 2,
                bathrooms: 2,
                price: 30000,
                station: "BTS ‡∏´‡∏°‡∏≠‡∏ä‡∏¥‡∏ï/MRT ‡∏à‡∏ï‡∏∏‡∏à‡∏±‡∏Å‡∏£ (‡πÄ‡∏î‡∏¥‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ)",
                age: "‡∏≠‡∏≤‡∏¢‡∏∏‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 7 ‡∏õ‡∏µ",
                features: "‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥, ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á 2 ‡∏™‡∏≤‡∏¢",
                color: "#27ae60",
                highlight: "‡πÉ‡∏Å‡∏•‡πâ‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ 2 ‡∏™‡∏≤‡∏¢",
                propertyUrl: "https://www.facebook.com/groups/2157264477895406/posts/4286143078340858/"
            }
        ];

        let map;

        // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏ó‡πá‡∏ö
        function switchTab(tab) {
            const tabs = document.querySelectorAll('.tab-button');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(t => t.classList.remove('active'));
            contents.forEach(c => c.classList.remove('active'));
            
            if (tab === 'map') {
                tabs[0].classList.add('active');
                document.getElementById('map-tab').classList.add('active');
                setTimeout(() => {
                    if (map) {
                        map.invalidateSize();
                    }
                }, 100);
            } else {
                tabs[1].classList.add('active');
                document.getElementById('list-tab').classList.add('active');
            }
        }

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î
        function generatePropertyCards() {
            const container = document.getElementById('property-cards');
            
            properties.forEach(prop => {
                const costPerformance = (prop.size / (prop.price / 1000)).toFixed(2);
                
                const card = document.createElement('div');
                card.className = 'property-card';
                card.innerHTML = `
                    <div class="property-header">
                        <div class="rank-badge">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö ${prop.rank}</div>
                        <div>
                            <div class="property-name">${prop.name}</div>
                            <div class="property-name-th">${prop.nameTh}</div>
                        </div>
                    </div>
                    
                    <div class="property-price">üí∞ ${prop.price.toLocaleString()} ‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                    
                    <div class="property-highlight">${prop.highlight}</div>
                    
                    <div class="property-details">
                        <div class="detail-row">
                            <span class="detail-icon">üìê</span>
                            <span><strong>${prop.size} ‡∏ï‡∏£.‡∏°.</strong> | üõè ${prop.bedrooms} ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô | üöø ${prop.bathrooms} ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-icon">üöâ</span>
                            <span>${prop.station}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-icon">üèó</span>
                            <span>${prop.age}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-icon">‚ú®</span>
                            <span>${prop.features}</span>
                        </div>
                    </div>
                    
                    <div class="property-footer">
                        üíµ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤: <strong>${costPerformance} ‡∏ï‡∏£.‡∏°./1,000‡∏ø</strong>
                    </div>
                    
                    <a href="${prop.propertyUrl}" target="_blank" rel="noopener noreferrer" class="view-button">
                        üì∑ ‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏´‡πâ‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á / ‡πÄ‡∏û‡∏à Agent
                    </a>
                `;
                
                container.appendChild(card);
            });
        }

        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà
        function initMap() {
            map = L.map('map').setView([13.76, 100.57], 12);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                maxZoom: 19
            }).addTo(map);

            const bounds = [];

            properties.forEach(property => {
                const costPerformance = (property.size / (property.price / 1000)).toFixed(2);

                const marker = L.circleMarker([property.lat, property.lng], {
                    radius: 14,
                    fillColor: property.color,
                    color: "white",
                    weight: 3,
                    opacity: 1,
                    fillOpacity: 0.9
                }).addTo(map);

                const popupContent = `
                    <div class="popup-content">
                        <h3>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö ${property.rank}: ${property.nameTh}</h3>
                        <div class="popup-price">üí∞ ${property.price.toLocaleString()} ‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                        <div class="popup-highlight">${property.highlight}</div>
                        <div class="popup-detail">üìê ${property.size} ‡∏ï‡∏£.‡∏°. | üõè ${property.bedrooms} ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô | üöø ${property.bathrooms} ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥</div>
                        <div class="popup-detail">üöâ ${property.station}</div>
                        <div class="popup-detail">üèó ${property.age}</div>
                        <div class="popup-detail">‚ú® ${property.features}</div>
                        <div class="popup-footer">üíµ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤: <strong>${costPerformance} ‡∏ï‡∏£.‡∏°./1,000‡∏ø</strong></div>
                        <a href="${property.propertyUrl}" target="_blank" rel="noopener noreferrer" class="popup-link">
                            üì∑ ‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏´‡πâ‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á / ‡πÄ‡∏û‡∏à Agent
                        </a>
                    </div>
                `;

                marker.bindPopup(popupContent, {
                    maxWidth: 300,
                    className: 'custom-popup'
                });

                const rankIcon = L.divIcon({
                    className: 'custom-marker',
                    html: `<div class="custom-marker" style="background-color: ${property.color};">${property.rank}</div>`,
                    iconSize: [28, 28],
                    iconAnchor: [14, 14]
                });

                L.marker([property.lat, property.lng], {
                    icon: rankIcon,
                    interactive: false
                }).addTo(map);

                bounds.push([property.lat, property.lng]);
            });

            if (bounds.length > 0) {
                map.fitBounds(bounds, { padding: [50, 50] });
            }
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        window.addEventListener('load', function() {
            generatePropertyCards();
            initMap();
        });
    </script>
</body>
</html>
